<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <title> Login - movie2you </title>
    
    <link rel="icon" type="img/camera.png" href="img/camera.png" />
    <link href="css/style-login.css" rel=stylesheet>
    <link href="css/bootstrap.min.css" rel=stylesheet>
    <script src="js/jquery.js"></script>
</head>

<body>
    <div>
        <a href="index.html" class="row box-index col-md-12"> Home</a>
    </div>

    <div class="container" id="content">
        <section id="browser-view">
            <div class="col-md-4">
                <main id="main-content">
                    <div class="authentication-form">
                        <div id="error-message" style="display: none" class="alert alert-danger" role="alert">Dados inválidos!</div>

                        <form action="movies.html "id="login-form" name="login-form" class="login-form">
                            <input name="username" id="username" type="text" placeholder="Email" required>
                            <input name="password" id="password" type="password" placeholder="Senha" required>
                            <input class="btn-submit" type="submit" value="Entrar">
                            <p>Não tem uma conta? <a href="cadaster.html"> Cadastre-se</a>
                        </form>
                    </div>
                </main>
            </div>
        </section>
    </div>

    <script>
        $('.message a').click(function () {
            $('form').animate({
                height: "toggle",
                opacity: "toggle"
            }, "slow");
        });
        $("#login-form").submit(login);
        function login(event) {
            event.preventDefault();
            $.ajax({
                type: 'POST',
                url: '/login',
                data: $('#login-form').serialize(),
                success: function (data) {
                    $(location).attr('href','/');
                },
                error: function (req, status, error) {
                    $('#username').val('');
                    $('#password').val('');
                    $('#error-message').css('display', 'block');
                }
            });
        }
    </script>
</body>

</html>